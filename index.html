<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ignacio Aguayo - Creative Technologist</title>
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom styles to complement Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0f1e; 
        }
        #starfield-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        #supernova-core {
            transform: translate(-50%, -50%);
            background: radial-gradient(ellipse at center, rgba(255,255,255,1) 0%, rgba(255,204,153,1) 35%, rgba(255,153,51,1) 60%, rgba(255,255,255,0) 100%);
            box-shadow: 0 0 50px 20px #fff, 0 0 100px 60px #f0f, 0 0 150px 100px #0ff;
            animation: pulse 1.5s infinite ease-in-out;
        }
        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0.8); opacity: 0.8; }
        }
        
        #modal-body {
             /* Stronger, more noticeable gradient */
             background-image: radial-gradient(ellipse at 50% 0%, rgba(45, 59, 99, 0.9) 0%, transparent 80%);
        }
        
        /* Custom Scrollbar for Modal */
        #modal-content::-webkit-scrollbar {
            width: 8px;
        }
        #modal-content::-webkit-scrollbar-track {
            background: #1e293b; /* slate-800 */
        }
        #modal-content::-webkit-scrollbar-thumb {
            background: #3b82f6; /* blue-500 */
            border-radius: 4px;
        }
        #modal-content::-webkit-scrollbar-thumb:hover {
            background: #2563eb; /* blue-600 */
        }

        /* Video container for correct aspect ratio */
        .video-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="text-gray-300">

    <!-- Canvas for the starfield animation -->
    <canvas id="starfield-canvas"></canvas>

    <!-- ========== HEADER / NAVBAR ========== -->
    <header class="bg-[#0a0f1e]/80 backdrop-blur-lg shadow-sm shadow-blue-500/10 sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#inicio">
                 <img src="assets/Logo.png" alt="Logo del Portafolio" class="h-24 rounded-full">
            </a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#sobre-mi" class="text-gray-300 hover:text-blue-400 transition duration-300">Sobre Mí</a>
                <a href="#proyectos" class="text-gray-300 hover:text-blue-400 transition duration-300">Proyectos</a>
                <a href="#contacto" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-lg shadow-blue-500/20 transition duration-300">Contáctame</a>
            </div>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-gray-300">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4 space-y-2">
            <a href="#sobre-mi" class="block text-gray-300 hover:text-blue-400 transition duration-300">Sobre Mí</a>
            <a href="#proyectos" class="block text-gray-300 hover:text-blue-400 transition duration-300">Proyectos</a>
            <a href="#contacto" class="block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-md transition duration-300 mt-2">Contáctame</a>
        </div>
    </header>

    <main class="container mx-auto px-6 relative z-10">

        <!-- ========== HERO SECTION ========== -->
        <section id="inicio" class="text-center py-24 md:py-32 flex flex-col items-center">
            <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">
                Hola, soy <span class="text-blue-400">Ignacio Aguayo</span>
            </h1>
            <p class="text-xl md:text-2xl text-gray-400 max-w-3xl mb-8">
                Creative Technologist. Construyo experiencias interactivas que conectan el mundo digital y el físico.
            </p>

            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 mt-8">
                <a href="#proyectos" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-blue-700 shadow-lg shadow-blue-500/30 transform hover:scale-105 transition-all duration-300">
                    Ver mis Proyectos
                </a>
                <a href="#contacto" class="bg-gray-700/50 text-gray-200 px-8 py-3 rounded-lg font-semibold text-lg hover:bg-gray-700/80 shadow-lg transform hover:scale-105 transition-all duration-300">
                    Hablemos
                </a>
            </div>
        </section>

        <!-- ========== ABOUT ME SECTION ========== -->
        <section id="sobre-mi" class="py-20">
            <div class="max-w-4xl mx-auto">
                <div class="flex flex-col md:flex-row items-center gap-12">
                    <!-- GIF Character -->
                    <div class="w-full md:w-1/3 flex-shrink-0">
                        <img src="assets/personaje_saludando.gif" alt="Personaje saludando" class="w-full max-w-xs mx-auto">
                    </div>
                    <!-- About Me Text -->
                    <div class="w-full md:w-2/3 text-center md:text-left">
                        <h2 class="text-3xl md:text-4xl font-bold text-gray-100 mb-4">Sobre Mí</h2>
                        <p id="bio-paragraph" class="text-lg text-gray-400">
                            Soy un tecnólogo creativo apasionado por la intersección del arte y el código. Mi enfoque es la creación de experiencias inmersivas e interactivas que desafían la percepción y conectan con las personas a un nivel más profundo.
                        </p>
                    </div>
                </div>

                <!-- Skills -->
                <div class="bg-gray-800/50 backdrop-blur-sm border border-blue-500/20 p-8 rounded-2xl shadow-lg text-left mt-20">
                    <h3 class="text-2xl font-bold text-white mb-6 text-center">Mis Habilidades</h3>
                    <div id="skills-list" class="flex flex-wrap justify-center gap-4">
                        <span class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded-full font-medium">Unity</span>
                        <span class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded-full font-medium">Desarrollo VR/AR</span>
                        <span class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded-full font-medium">Mobile Apps</span>
                        <span class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded-full font-medium">TouchDesigner</span>
                        <span class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded-full font-medium">UX/UI Design</span>
                        <span class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded-full font-medium">Experiencias Interactivas</span>
                        <span class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded-full font-medium">Shaders & Visuales Generativos</span>
                        <span class="bg-blue-900/50 text-blue-300 px-4 py-2 rounded-full font-medium">Creative Coding</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== PROJECTS SECTION ========== -->
        <section id="proyectos" class="py-20 text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-100 mb-2">Proyectos Destacados</h2>
            <p class="text-lg text-gray-400 mb-12">Una selección de mis mejores trabajos.</p>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                
                <!-- Project Card 1 -->
                <div class="bg-gray-800/50 backdrop-blur-sm border border-blue-500/20 rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 group">
                    <img src="assets/GaleriaCircular.png" alt="Imagen del Proyecto Galería Circular Interactiva" class="w-full h-48 object-contain">
                    <div class="p-6 text-left">
                        <h3 class="text-xl font-bold text-white mb-2">Galería Circular Interactiva</h3>
                        <p class="text-gray-400 mb-4">
                            Experiencia en TouchDesigner con una galería circular controlada por hand tracking.
                        </p>
                        <button class="font-semibold text-blue-400 hover:text-blue-300 transition-colors duration-300" 
                                data-modal-trigger 
                                data-title="Galería Circular Interactiva" 
                                data-subtitle="Navegación Inmersiva con TouchDesigner" 
                                data-video-id="13Ajb89Q01Q"
                                data-challenge="El desafío fue crear una forma innovadora de presentar imágenes, buscando una experiencia que superara la visualización estática y fomentara una interacción más profunda."
                                data-process="Para lograr una interacción intuitiva, opté por el hand tracking como método de control. El principal reto técnico fue combinar la galería esférica con la precisión del seguimiento de manos, lo que requirió un diseño gestual cuidadoso y optimización para asegurar una experiencia fluida."
                                data-tech='["TouchDesigner", "Hand Tracking", "Visuales Generativos"]'>
                            Ver Detalles &rarr;
                        </button>
                    </div>
                </div>

                <!-- Project Card 2 -->
                <div class="bg-gray-800/50 backdrop-blur-sm border border-blue-500/20 rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 group">
                    <img src="assets/IaGenerativaManos.png" alt="Imagen del Proyecto IA Generativa" class="w-full h-48 object-contain">
                    <div class="p-6 text-left">
                        <h3 class="text-xl font-bold text-white mb-2">Imágenes con IA y Gestos</h3>
                        <p class="text-gray-400 mb-4">
                            Aplicación en TouchDesigner que genera imágenes con IA a partir de los gestos de las manos.
                        </p>
                        <button class="font-semibold text-blue-400 hover:text-blue-300 transition-colors duration-300" data-modal-trigger>Ver Detalles &rarr;</button>
                    </div>
                </div>

                <!-- Project Card 3 -->
                <div class="bg-gray-800/50 backdrop-blur-sm border border-blue-500/20 rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 group">
                    <img src="assets/Deconstruccion.png" alt="Imagen del Proyecto Deconstrucción 3D" class="w-full h-48 object-contain">
                    <div class="p-6 text-left">
                        <h3 class="text-xl font-bold text-white mb-2">Deconstrucción de Objetos 3D</h3>
                        <p class="text-gray-400 mb-4">
                            Experiencia interactiva que deconstruye modelos 3D usando hand tracking en TouchDesigner.
                        </p>
                        <button class="font-semibold text-blue-400 hover:text-blue-300 transition-colors duration-300" data-modal-trigger>Ver Detalles &rarr;</button>
                    </div>
                </div>

                <!-- Project Card 4 -->
                <div class="bg-gray-800/50 backdrop-blur-sm border border-blue-500/20 rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 group">
                    <img src="assets/galeriavr.png" alt="Imagen del Proyecto Galería VR" class="w-full h-48 object-contain">
                    <div class="p-6 text-left">
                        <h3 class="text-xl font-bold text-white mb-2">Galería VR para Fotógrafos</h3>
                        <p class="text-gray-400 mb-4">
                            App de galería virtual en VR para Meta Quest 2, diseñada para un evento de fotógrafos.
                        </p>
                        <button class="font-semibold text-blue-400 hover:text-blue-300 transition-colors duration-300" data-modal-trigger>Ver Detalles &rarr;</button>
                    </div>
                </div>
                
                <!-- Project Card 5 -->
                <div class="bg-gray-800/50 backdrop-blur-sm border border-blue-500/20 rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 group">
                    <img src="assets/Bomberos.png" alt="Imagen del Proyecto App Bomberos" class="w-full h-48 object-contain">
                    <div class="p-6 text-left">
                        <h3 class="text-xl font-bold text-white mb-2">App Móvil para Bomberos</h3>
                        <p class="text-gray-400 mb-4">
                           Diseño de app para ubicar material y consultar procedimientos en carros bomba.
                        </p>
                        <button class="font-semibold text-blue-400 hover:text-blue-300 transition-colors duration-300" data-modal-trigger>Ver Detalles &rarr;</button>
                    </div>
                </div>

                <!-- Project Card 6 -->
                <div class="bg-gray-800/50 backdrop-blur-sm border border-blue-500/20 rounded-2xl shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 group">
                    <img src="assets/PalCarrete.png" alt="Imagen del Proyecto PalCarrete App" class="w-full h-48 object-contain">
                    <div class="p-6 text-left">
                        <h3 class="text-xl font-bold text-white mb-2">PalCarrete App</h3>
                        <p class="text-gray-400 mb-4">
                            Aplicación móvil para beber con sistema de retos, castigos y diferentes tarjetas de juego.
                        </p>
                        <button class="font-semibold text-blue-400 hover:text-blue-300 transition-colors duration-300" data-modal-trigger>Ver Detalles &rarr;</button>
                    </div>
                </div>

            </div>
        </section>

        <!-- ========== CONTACT SECTION ========== -->
        <section id="contacto" class="py-20 text-center">
            <div class="bg-gray-800/50 backdrop-blur-sm border border-blue-500/20 rounded-2xl shadow-lg p-10 max-w-3xl mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-100 mb-2">Hablemos</h2>
                <p class="text-lg text-gray-400 mb-12">
                    ¿Tienes un proyecto en mente o una oportunidad para mí? ¡No dudes en contactarme!
                </p>
                <a href="mailto:i.aguayo2212@gmail.com" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-blue-700 shadow-lg shadow-blue-500/30 transform hover:scale-105 transition-all duration-300 inline-block">
                    Enviar un Correo
                </a>
            </div>
        </section>

    </main>
    
    <!-- ========== FOOTER ========== -->
    <footer class="bg-gray-900/50 mt-20">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>&copy; 2025 Ignacio Aguayo. Todos los derechos reservados.</p>
            <div class="mt-8">
                <button id="destroy-btn" class="bg-red-700 text-white px-6 py-2 rounded-lg font-semibold hover:bg-red-800 shadow-lg shadow-red-500/30 transform hover:scale-105 transition-all duration-300">
                    ¡Destruir Página!
                </button>
            </div>
        </div>
    </footer>

    <!-- ========== PROJECT MODAL ========== -->
    <div id="project-modal" class="fixed inset-0 bg-black bg-opacity-70 z-[100] flex justify-center items-center p-4 opacity-0 pointer-events-none transition-opacity duration-300">
        <div id="modal-content" class="relative bg-[#0d1323] border border-blue-500/20 rounded-2xl shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto transform scale-95 transition-all duration-300">
            <!-- Close Button -->
            <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-transform duration-200 transform hover:scale-110 z-10">
                <div class="bg-gray-800/50 rounded-full p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </div>
            </button>
            
            <!-- Modal Body -->
            <div id="modal-body">
                 <div class="p-8">
                    <!-- Project Title -->
                    <h1 id="modal-title" class="text-4xl md:text-5xl font-extrabold text-white leading-tight mb-2 text-center mt-8"></h1>
                    <p id="modal-subtitle" class="text-lg text-blue-400 mb-8 text-center"></p>

                    <!-- Project Media (Video) -->
                    <div class="video-container rounded-lg overflow-hidden mb-8">
                        <iframe id="modal-video" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>

                    <div class="px-4 sm:px-8">
                        <!-- Project Details -->
                        <div class="grid md:grid-cols-3 gap-8 text-lg">
                            <div class="md:col-span-1">
                                <h2 class="text-2xl font-bold text-white mb-4">El Desafío</h2>
                                <p id="modal-challenge" class="text-gray-400 text-justify"></p>
                            </div>
                            <div class="md:col-span-2">
                                <h2 class="text-2xl font-bold text-white mb-4">Mi Proceso</h2>
                                <p id="modal-process" class="text-gray-400 text-justify"></p>
                            </div>
                        </div>

                        <!-- Technologies Used -->
                        <div class="mt-12 bg-gray-800/50 p-6 rounded-xl">
                            <h3 class="text-xl font-bold text-white mb-4 text-center">Tecnologías Utilizadas</h3>
                            <div id="modal-tech" class="flex flex-wrap justify-center gap-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Supernova and Reset Elements -->
    <div id="supernova-core" class="hidden fixed top-1/2 left-1/2 w-8 h-8 rounded-full z-[200]"></div>
    <div id="reset-overlay" class="hidden fixed inset-0 bg-white z-[250] flex justify-center items-center flex-col opacity-0 transition-opacity duration-1000">
        <h2 class="text-4xl text-gray-800 mb-8 text-center px-4">¿Qué has hecho? ¡Mi portafolio!</h2>
        <button id="reset-btn" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold text-lg hover:bg-blue-700">
            Explorar de Nuevo
        </button>
    </div>


    <script>
        // --- Mobile menu toggle script ---
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

        // --- INTERACTIVE STARFIELD BACKGROUND SCRIPT ---
        const canvas = document.getElementById('starfield-canvas');
        if (canvas) {
            const ctx = canvas.getContext('2d');

            let stars;
            let shootingStars = [];
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            let mouse = { x: undefined, y: undefined, radius: 150 };

            window.addEventListener('mousemove', (event) => { mouse.x = event.x; mouse.y = event.y; });
            window.addEventListener('mouseout', () => { mouse.x = undefined; mouse.y = undefined; });

            class Star {
                constructor(x, y, speedX, speedY, size, color) {
                    this.x = x; this.y = y; this.speedX = speedX; this.speedY = speedY; this.size = size; this.color = color;
                    this.baseX = this.x; this.baseY = this.y; this.density = (Math.random() * 30) + 1;
                }
                draw() {
                    ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.closePath(); ctx.fill();
                }
                update() {
                    let dx = mouse.x - this.x; let dy = mouse.y - this.y; let distance = Math.sqrt(dx * dx + dy * dy);
                    if (distance < mouse.radius) {
                        let forceDirectionX = dx / distance; let forceDirectionY = dy / distance; let maxDistance = mouse.radius;
                        let force = (maxDistance - distance) / maxDistance;
                        let directionX = forceDirectionX * force * this.density; let directionY = forceDirectionY * force * this.density;
                        this.x -= directionX; this.y -= directionY;
                    } else {
                        if (this.x !== this.baseX) { let dx = this.x - this.baseX; this.x -= dx/10; }
                        if (this.y !== this.baseY) { let dy = this.y - this.baseY; this.y -= dy/10; }
                    }
                    this.x += this.speedX; this.y += this.speedY;
                    if (this.x > canvas.width) this.x = 0; if (this.x < 0) this.x = canvas.width;
                    if (this.y > canvas.height) this.y = 0; if (this.y < 0) this.y = canvas.height;
                    this.draw();
                }
            }

            class ShootingStar {
                constructor() { this.reset(); }
                reset() {
                    this.x = Math.random() * canvas.width; this.y = 0; this.len = (Math.random() * 80) + 10; this.speed = (Math.random() * 10) + 6;
                    this.size = (Math.random() * 1) + 0.5; this.waitTime = new Date().getTime() + (Math.random() * 6000) + 1000; this.active = false;
                }
                update() {
                    if (this.active) {
                        this.x += this.speed; this.y += this.speed * 0.5;
                        if (this.x > canvas.width || this.y > canvas.height) { this.reset(); } else { this.draw(); }
                    } else { if (new Date().getTime() > this.waitTime) { this.active = true; } }
                }
                draw() {
                    const grad = ctx.createLinearGradient(this.x, this.y, this.x - this.len, this.y - (this.len * 0.5));
                    grad.addColorStop(0, `rgba(255, 255, 255, ${this.size})`); grad.addColorStop(1, 'rgba(255, 255, 255, 0)');
                    ctx.strokeStyle = grad; ctx.lineWidth = this.size; ctx.beginPath(); ctx.moveTo(this.x, this.y);
                    ctx.lineTo(this.x - this.len, this.y - (this.len * 0.5)); ctx.stroke();
                }
            }

            function init() {
                stars = []; let numberOfStars = (canvas.height * canvas.width) / 5000;
                for (let i = 0; i < numberOfStars; i++) {
                    let size = Math.random() * 1.5 + 0.5; let x = Math.random() * canvas.width; let y = Math.random() * canvas.height;
                    let speedX = (Math.random() * 0.2) - 0.1; let speedY = (Math.random() * 0.2) - 0.1;
                    let color = 'rgba(59, 130, 246, ' + (Math.random() * 0.7 + 0.3) + ')';
                    stars.push(new Star(x, y, speedX, speedY, size, color));
                }
                shootingStars = []; for (let i = 0; i < 3; i++) { shootingStars.push(new ShootingStar()); }
            }

            function animate() {
                requestAnimationFrame(animate); 
                if (ctx) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    stars.forEach(s => s.update()); 
                    shootingStars.forEach(ss => ss.update());
                }
            }

            window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; init(); });
            init(); animate();
        }

        // --- PROJECT MODAL SCRIPT ---
        const modalTriggers = document.querySelectorAll('[data-modal-trigger]');
        const modal = document.getElementById('project-modal');
        const modalContent = document.getElementById('modal-content');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        const modalElements = {
            title: document.getElementById('modal-title'),
            subtitle: document.getElementById('modal-subtitle'),
            video: document.getElementById('modal-video'),
            challenge: document.getElementById('modal-challenge'),
            process: document.getElementById('modal-process'),
            tech: document.getElementById('modal-tech'),
        };
        
        function openModal(data) {
            modalElements.title.textContent = data.title || 'Título del Proyecto';
            modalElements.subtitle.textContent = data.subtitle || '';
            modalElements.video.src = data.videoId ? `https://www.youtube.com/embed/${data.videoId}` : '';
            modalElements.challenge.textContent = data.challenge || 'No hay descripción disponible.';
            modalElements.process.textContent = data.process || 'No hay descripción disponible.';
            
            modalElements.tech.innerHTML = '';
            if (data.tech) {
                try {
                    const techArray = JSON.parse(data.tech.replace(/'/g, '"'));
                    techArray.forEach(techName => {
                        const techTag = document.createElement('span');
                        techTag.className = 'bg-blue-900/50 text-blue-300 px-3 py-1 rounded-full font-medium text-sm';
                        techTag.textContent = techName;
                        modalElements.tech.appendChild(techTag);
                    });
                } catch(e) {
                    console.error("Could not parse tech data: ", e, data.tech);
                }
            }

            modal.classList.remove('pointer-events-none');
            modal.classList.remove('opacity-0');
            modalContent.classList.remove('scale-95');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.classList.add('opacity-0');
            modalContent.classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('pointer-events-none');
                modalElements.video.src = ''; // Detiene el video al cerrar
                document.body.style.overflow = '';
            }, 300); // Wait for transition to finish
        }

        modalTriggers.forEach(trigger => {
            trigger.addEventListener('click', () => {
                const data = trigger.dataset;
                openModal(data);
            });
        });

        modalCloseBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('pointer-events-none')) {
                closeModal();
            }
        });


        // --- SUPERNOVA DESTRUCTION SCRIPT ---
        const destroyBtn = document.getElementById('destroy-btn');
        const supernovaCore = document.getElementById('supernova-core');
        const resetOverlay = document.getElementById('reset-overlay');
        const resetBtn = document.getElementById('reset-btn');

        destroyBtn.addEventListener('click', () => {
            document.body.style.overflow = 'hidden';
            destroyBtn.style.display = 'none';
            supernovaCore.classList.remove('hidden');
            
            const elementsToDestroy = Array.from(document.querySelectorAll('header, main > section'));
            const viewportCenterX = window.innerWidth / 2;
            const viewportCenterY = window.innerHeight / 2;

            elementsToDestroy.forEach((el, index) => {
                const rect = el.getBoundingClientRect();
                const elCenterX = rect.left + rect.width / 2;
                const elCenterY = rect.top + rect.height / 2;
                const deltaX = elCenterX - viewportCenterX;
                const deltaY = elCenterY - viewportCenterY;
                const moveX = deltaX * 3;
                const moveY = deltaY * 3;
                const rotation = (Math.random() - 0.5) * 360;

                el.style.transition = `all 1.5s ease-in-out ${index * 100}ms`;
                el.style.transformOrigin = 'center center';
                
                setTimeout(() => {
                    el.style.transform = `translateX(${moveX}px) translateY(${moveY}px) scale(0.5) rotate(${rotation}deg)`;
                    el.style.opacity = '0';
                }, 50);
            });
            
            const totalAnimationTime = (elementsToDestroy.length - 1) * 100 + 1500;

            setTimeout(() => {
                const finalSize = Math.max(window.innerWidth, window.innerHeight) * 3;
                supernovaCore.style.transition = 'all 0.5s ease-in';
                supernovaCore.style.width = `${finalSize}px`;
                supernovaCore.style.height = `${finalSize}px`;
                supernovaCore.style.opacity = '0';
                document.body.style.transition = 'background-color 0.5s ease-in';
                document.body.style.backgroundColor = '#ffffff';
            }, totalAnimationTime - 500);

            setTimeout(() => {
                resetOverlay.classList.remove('hidden');
                setTimeout(() => {
                    resetOverlay.style.opacity = '1';
                }, 10);
            }, totalAnimationTime); 
        });

        resetBtn.addEventListener('click', () => {
            resetOverlay.style.transition = 'opacity 0.5s ease-out';
            resetOverlay.style.opacity = '0';
            setTimeout(() => { location.reload(); }, 500);
        });
    </script>

</body>
</html>

